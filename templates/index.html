<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV Box</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <div class="container">
        <h1>TV Box</h1>
        
        <!-- Add Link Button -->
        <div class="add-button-container">
            <button class="btn-primary" onclick="openAddModal()">
                <svg class="icon" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/>
                </svg>
                Add New Link
            </button>
        </div>

        <!-- Links Grid -->
        <div class="links-grid" id="linksGrid">
            <div class="link-card-container">
                <a href="https://www.youtube.com" target="_blank" class="link-card">
                    <div class="link-icon">
                        <img src="https://logo.clearbit.com/youtube.com" alt="YouTube" onerror="handleIconError(this, 'youtube.com', 'YouTube', 1)">
                    </div>
                    <h5 class="link-title">YouTube</h5>
                </a>
                <button class="edit-button" onclick="editLink(this)" title="Edit">
                    <svg class="icon" viewBox="0 0 20 20">
                        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>
                    </svg>
                </button>
            </div>
            <div class="link-card-container">
                <a href="https://www.netflix.com" target="_blank" class="link-card">
                    <div class="link-icon">
                        <img src="https://logo.clearbit.com/netflix.com" alt="Netflix" onerror="handleIconError(this, 'netflix.com', 'Netflix', 1)">
                    </div>
                    <h5 class="link-title">Netflix</h5>
                </a>
                <button class="edit-button" onclick="editLink(this)" title="Edit">
                    <svg class="icon" viewBox="0 0 20 20">
                        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Add Link Modal -->
    <div class="modal-overlay" id="addLinkModal">
        <div class="modal">
            <div class="modal-header">
                <h5 class="modal-title">Add New Link</h5>
                <button type="button" class="modal-close" onclick="closeAddModal()">×</button>
            </div>
            <div class="modal-body">
                <form id="addLinkForm">
                    <div class="form-group">
                        <label for="linkName" class="form-label">Name</label>
                        <input type="text" class="form-control" id="linkName" required>
                    </div>
                    <div class="form-group">
                        <label for="linkUrl" class="form-label">URL</label>
                        <div class="input-group">
                            <input type="url" class="form-control" id="linkUrl" required>
                            <a href="https://www.google.com" target="_blank" class="btn-secondary">
                                <svg class="icon" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"/>
                                </svg>
                                Search
                            </a>
                        </div>
                    </div>
                    <div class="icon-selector">
                        <div class="custom-icon-toggle">
                            <span class="form-label">Use custom icon</span>
                            <div class="toggle-switch" id="addCustomIconToggle" onclick="toggleCustomIcon('add')"></div>
                        </div>
                        <div class="icon-selector-container" id="addIconSelector">
                            <label class="icon-selector-label">Choose an icon:</label>
                            <div class="icon-preview" id="addIconPreview">
                                <i class="bi bi-link-45deg"></i>
                            </div>
                            <div class="icon-color-picker">
                                <label for="addIconColor" class="form-label">Icon Color</label>
                                <div class="color-picker-wrapper">
                                    <input type="color" class="color-picker" id="addIconColor" value="#6366f1" onchange="updateIconPreviewColor('add', this.value)">
                                    <div class="color-presets">
                                        <button type="button" class="color-preset" style="background: #6366f1" onclick="setIconColor('add', '#6366f1')" title="Default"></button>
                                        <button type="button" class="color-preset" style="background: #ef4444" onclick="setIconColor('add', '#ef4444')" title="Red"></button>
                                        <button type="button" class="color-preset" style="background: #10b981" onclick="setIconColor('add', '#10b981')" title="Green"></button>
                                        <button type="button" class="color-preset" style="background: #f59e0b" onclick="setIconColor('add', '#f59e0b')" title="Yellow"></button>
                                        <button type="button" class="color-preset" style="background: #8b5cf6" onclick="setIconColor('add', '#8b5cf6')" title="Purple"></button>
                                        <button type="button" class="color-preset" style="background: #06b6d4" onclick="setIconColor('add', '#06b6d4')" title="Cyan"></button>
                                    </div>
                                </div>
                            </div>
                            <div class="icon-search">
                                <input type="text" class="form-control" id="addIconSearch" placeholder="Search icons..." onkeyup="searchIcons('add', this.value)">
                            </div>
                            <div class="icon-grid" id="addIconGrid"></div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeAddModal()">Cancel</button>
                <button type="button" class="btn-primary" onclick="addNewLink()">Add Link</button>
            </div>
        </div>
    </div>

    <!-- Edit Link Modal -->
    <div class="modal-overlay" id="editLinkModal">
        <div class="modal">
            <div class="modal-header">
                <h5 class="modal-title">Edit Link</h5>
                <button type="button" class="modal-close" onclick="closeEditModal()">×</button>
            </div>
            <div class="modal-body">
                <form id="editLinkForm">
                    <div class="form-group">
                        <label for="editLinkName" class="form-label">Name</label>
                        <input type="text" class="form-control" id="editLinkName" required>
                    </div>
                    <div class="form-group">
                        <label for="editLinkUrl" class="form-label">URL</label>
                        <div class="input-group">
                            <input type="url" class="form-control" id="editLinkUrl" required>
                            <a href="https://www.google.com" target="_blank" class="btn-secondary">
                                <svg class="icon" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"/>
                                </svg>
                                Search
                            </a>
                        </div>
                    </div>
                    <div class="icon-selector">
                        <div class="custom-icon-toggle">
                            <span class="form-label">Use custom icon</span>
                            <div class="toggle-switch" id="editCustomIconToggle" onclick="toggleCustomIcon('edit')"></div>
                        </div>
                        <div class="icon-selector-container" id="editIconSelector">
                            <label class="icon-selector-label">Choose an icon:</label>
                            <div class="icon-preview" id="editIconPreview">
                                <i class="bi bi-link-45deg"></i>
                            </div>
                            <div class="icon-color-picker">
                                <label for="editIconColor" class="form-label">Icon Color</label>
                                <div class="color-picker-wrapper">
                                    <input type="color" class="color-picker" id="editIconColor" value="#6366f1" onchange="updateIconPreviewColor('edit', this.value)">
                                    <div class="color-presets">
                                        <button type="button" class="color-preset" style="background: #6366f1" onclick="setIconColor('edit', '#6366f1')" title="Default"></button>
                                        <button type="button" class="color-preset" style="background: #ef4444" onclick="setIconColor('edit', '#ef4444')" title="Red"></button>
                                        <button type="button" class="color-preset" style="background: #10b981" onclick="setIconColor('edit', '#10b981')" title="Green"></button>
                                        <button type="button" class="color-preset" style="background: #f59e0b" onclick="setIconColor('edit', '#f59e0b')" title="Yellow"></button>
                                        <button type="button" class="color-preset" style="background: #8b5cf6" onclick="setIconColor('edit', '#8b5cf6')" title="Purple"></button>
                                        <button type="button" class="color-preset" style="background: #06b6d4" onclick="setIconColor('edit', '#06b6d4')" title="Cyan"></button>
                                    </div>
                                </div>
                            </div>
                            <div class="icon-search">
                                <input type="text" class="form-control" id="editIconSearch" placeholder="Search icons..." onkeyup="searchIcons('edit', this.value)">
                            </div>
                            <div class="icon-grid" id="editIconGrid"></div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeEditModal()">Cancel</button>
                <button type="button" class="btn-danger" onclick="deleteLink()">Delete</button>
                <button type="button" class="btn-primary" onclick="saveEditedLink()">Save Changes</button>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>